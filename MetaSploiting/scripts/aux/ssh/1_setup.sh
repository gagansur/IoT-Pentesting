## author: Gagandeep Sur 
## email: gks007@shsu.edu
## copyright @2022

process="postgresql"
# if postgresql is not running then start
## pgrep to check if a process is running
## if not running then start it.
## needs sudo command

if ! pgrep -f "$process"; then
sudo /bin/bash <<EOF
systemctl start postgresql.service
EOF
else
echo "Posgtresql service is running "
# print out status of postgresql service using msfconsole
sudo /bin/bash <<EOF
msfconsole -q -x "msfdb status"
EOF
fi

# $# number of arguments to file
# $1 first argument

#if arguments are provided then 
# check if $1 is for recreate
# run msfconsole commands
if [ $# -gt 0 ]
then
if [ $1 == "recreate" ] 
then
# commented out to prevent inadvertent deletion
#run msfconsole commands usig sudo /bin/bash
sudo /bin/bash <<EOF
#msfconsole -q -x "msfdb delete"
#msfconsole -q -x "msfdb init"
#msfconsole -q -x "msfdb start"
#msfconsole -q -x "msfdb status"
EOF
fi
fi

